<!doctype html>
<html lang="en">
<meta charset="utf-8">
<title>Kobong · Health Status</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
  :root{--ok:#16a34a;--bad:#dc2626;--muted:#6b7280}
  body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,'Noto Sans',sans-serif;margin:24px}
  .card{max-width:720px;border:1px solid #e5e7eb;border-radius:14px;padding:16px;box-shadow:0 2px 10px rgba(0,0,0,.05)}
  h1{margin:0 0 12px 0;font-size:20px}
  .row{display:flex;gap:12px;align-items:center;margin:6px 0}
  .dot{width:10px;height:10px;border-radius:50%}
  .kv{display:grid;grid-template-columns:140px 1fr;gap:8px 12px;margin-top:8px}
  code,pre{background:#f8fafc;padding:2px 6px;border-radius:6px}
  .muted{color:var(--muted)}
</style>
<div class="card">
  <h1>Health Status <span id="when" class="muted"></span></h1>
  <div class="row">
    <div id="dot" class="dot" style="background:var(--muted)"></div>
    <div id="status" class="muted">checking…</div>
  </div>
  <div class="kv">
    <div>URL</div><div><code id="url"></code></div>
    <div>HTTP</div><div id="http">-</div>
    <div>Body</div><div><pre id="body" style="white-space:pre-wrap;margin:0"></pre></div>
  </div>
  <p class="muted" style="margin-top:12px">Auto-refresh every 10s · Source: <code>docs/badges/status.json</code></p>
</div>
<script>
const urlJson='docs/badges/status.json';
const el=(id)=>document.getElementById(id);
async function tick(){
  try{
    const r=await fetch(urlJson,{cache:'no-store'});
    el('http').textContent=r.status;
    const j=await r.json();
    el('url').textContent=j.url||'-';
    el('body').textContent=(j.body||'').slice(0,800);
    const ok = (j.ok===true) || (j.http===200 && /"status"\s*:\s*"ok"/.test(j.body||''));
    el('status').textContent = ok ? 'UP' : 'DOWN';
    el('status').classList.toggle('muted',false);
    el('dot').style.background = ok ? 'var(--ok)' : 'var(--bad)';
    el('when').textContent = '· ' + new Date().toLocaleString();
  }catch(e){
    el('status').textContent='ERROR'; el('dot').style.background='var(--bad)';
  }
}
tick(); setInterval(tick,10000);
</script>
</html>